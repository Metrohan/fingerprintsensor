{% extends "base.html" %}

{% block content %}
<h1> Bugünün Yoklaması</h1>
<p class="muted"> Tarih: {{ date }}</p>

<div class="cards">
  <div class="card">
    <div class="card-title">Toplam Kayıt</div>
    <div class="card-value">{{ total }}</div>
  </div>
  <div class="card">
    <div class="card-title">Şu An İçeride</div>
    <div class="card-value">{{ inside_count }}</div>
  </div>
  <div class="card">
    <div class="card-title">Çıkmışlar</div>
    <div class="card-value">{{ total - inside_count }}</div>
  </div>
</div>

<table class="table">
  <thead>
    <tr>
      <th> Ad</th>
      <th> Soyad</th>
      <th> Giriş Saati</th>
      <th> Çıkış Saati</th>
      <th> Durum</th>
    </tr>
  </thead>
  <tbody>
    {% if records %}
      {% for r in records %}
        <tr class="{% if r.status == 'İçeride' %}row-inside{% else %}row-out{% endif %}">
          <td><strong>{{ r.first_name }}</strong></td>
          <td>{{ r.last_name }}</td>
          <td>{{ r.check_in[:19] if r.check_in else '-' }}</td>
          <td>{{ r.check_out[:19] if r.check_out else '-' }}</td>
          <td>
            {% if r.status == 'İçeride' %}
              <span style="background: #dcfce7; color: #166534; padding: 4px 8px; border-radius: 4px; font-size: 0.85rem; font-weight: 500;"> {{ r.status }}</span>
            {% else %}
              <span style="background: #fed7aa; color: #92400e; padding: 4px 8px; border-radius: 4px; font-size: 0.85rem; font-weight: 500;"> {{ r.status }}</span>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="5" style="text-align:center; padding: 24px;">
          <em style="color: #9ca3af;">Bugün için henüz kayıt yok.</em>
        </td>
      </tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
